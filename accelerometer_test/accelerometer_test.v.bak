module accelerometer_test(CLK12M, SDO, SDI, SPC, CS, out);
    input CLK12M, SDO;
    output SDI;
    output SPC;
    output CS;
    output [7:0] out;

    reg SPC = 1'b1;
    reg [3:0] cnt <= 4'b0000;
    reg RW <= 1'b0;
    reg MS <= 1'b1;
    reg [5:0] AD <= 6'b101000;
    reg [7:0] DI <= 8'b00000000;
    reg [7:0] DO;

    reg [15:0] in_data;

    always @(posedge CLK12M) begin
        if(CS == 0) begin
            SPC <= ~SPC;
            in_data <= {RW, MS, AD, DI};
        end else begin  
            SPC <= 1'b1;
        end
    end

    always @(negedge SPC) begin
        SDI <= in_data[cnt];
        if(counter > 7) begin
            SPO <= DO[cnt - 4'd8];
        end else begin
            SPO <= 1'b1;
        end
    end
endmodule
